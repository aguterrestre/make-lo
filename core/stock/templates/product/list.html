{% extends 'list.html' %}
{% load static %}

{% block columns %}
  <tr>
      <th scope="col" style="width: 10%;">Código</th>
      <th scope="col" style="width: 20%;">Nombre</th>
      <th scope="col" style="width: 15%;">Código de barra</th>
      <th scope="col" style="width: 10%;">Precio final</th>
      <th scope="col" style="width: 10%;">Stock</th>
      <th scope="col" style="width: 10%;">Fecha Venc.</th>
      <th scope="col" style="width: 10%;">Imágen</th>
      <th scope="col" style="width: 15%;">Unidad</th>
      <th scope="col" style="width: 10%;">Opciones</th>
  </tr>
{% endblock %}

{% block rows %}
  {% for product in object_list %}
    <tr>
      <td>{{ product.id }}</td>
      <td>{{ product.name }}</td>
      <td>{{ product.barcode }}</td>
      <td>{{ product.final_price }}</td>
      {% if product.stock <= 0 %}
          <td><span class="badge badge-danger">{{ product.stock }}</span></td>
      {% else %}
          <td><span class="badge badge-success">{{ product.stock }}</span></td>
      {% endif %}
      <td>{{ product.date_expiration|date:'d/m/Y' }}</td>
      <td>
        <img src="{{ product.get_image }}" class="img-fluid d-block mx-auto" style="width: 50px; height: 50px;">
      </td>
      <td>{{ product.unit }}</td>
      <td>
        <a href="{% url 'stock:product_update' product.id %}" class="btn btn-warning btn-xs btn-flat"
        style="color: white;">
          <i class="fas fa-edit"></i>
        </a>
        <a href="{% url 'stock:product_delete' product.id %}" class="btn btn-danger btn-xs btn-flat">
          <i class="fas fa-trash-alt"></i>
        </a>
      </td>
    </tr>
  {% endfor %}
{% endblock %}

{% block buttons_list %}
    <a href="{{ product_report_url }}" class="btn btn-success btn-flat">
        <i class="fas fa-chart-bar"></i> Reporte de Producto
    </a>
{% endblock %}

{% block javascript %}
<!-- DataTable 1.10.20 -->
<script type="application/javascript">
  $(document).ready( function () {
    $('#table_id').DataTable({
      responsive: true,
      autoWidth: false,
      "language": {
          url: '{% static 'lib/datatables-1.10.20/spanish.txt' %}'
      },
      "lengthMenu": [ 5, 10, 15, 20 ]
    });
  } );
</script>
{% endblock %}
